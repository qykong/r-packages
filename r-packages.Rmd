---
title: "My favourite R packages"
subtitle: "generated by xaringan"
author: "Quyu Kong"
date: "2020/03/21"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

# Packages by categories

- Data processing:
  - `data.table` v.s. `tidyverse` (`tibble`, `dplyr`, `readr`, `magrittr`)
  - `purrr`
- Parallel computation:
  - `parallel::mclapply`
  - `future`
  - `furrr`, `future.batchtools`
- Visualization:
  - `ggplot2`, `cowplot`, `patchwork`
  - `shiny`
- Debugging:
  - `profvis`

```{r include=FALSE}
library(tidyverse)
library(data.table)
library(parallel)
library(furrr)
library(cowplot)
library(patchwork)
library(future.batchtools)
library(profvis)
library(magrittr)
```

---
class: inverse, center, middle

# data.table v.s. tidyverse
## More efficient v.s. better readability
---
# Tidyverse

`magrittr` provides the core of `tidyverse`'s better readability.
```{r eval=FALSE}
x %>% f()
f(x)
```
I found this particularly useful when playing around with data in the console
```{r}
unique(iris$Species)
unique(iris$Species) %>% length()
```

---
# Tidyverse

`tibble` is "a modern reimagining of the data.frame"

```{r}
iris %>% as_tibble() %>% print(n=5) # print(as_tibble(iris), n = 5)
```

`readr` implements APIs for reading from and writing to files
```{r include=TRUE,eval=FALSE}
write_csv(iris, file = 'iris.csv.gz')
read_csv(file = 'iris.csv.gz')
```

---
# Tidyverse

`dplyr` is a grammar of data manipulation.
examples here

---
# data.table

`data.table` is another reimplementation of `data.frame` and a data processing grammar designed with efficiency in mind at day 1, both memory and data processing efficiency:
  - multi-threading processing
  - data processing by reference
  
  
---
# purrr from tidyverse

`purrr` is an alternative to R default `apply` function family (`lapply`, `vapply`, etc.). 

---
# profvis
```{r}
profvis::profvis({
  get_tweet_id <- function() return(1);
  has_next_tweet <- function(i) i < 10000;
  k <- numeric(); i <- 1;
  while (has_next_tweet(i)) {k <- c(k, get_tweet_id()); i <- i + 1;}
  k <- numeric(); i <- 1;
  while (has_next_tweet(i)) {k[i] <- get_tweet_id(); i <- i + 1;}
})
```

